@page "/sets"
@page "/sets/{folderId:int}"

@using BlazorLanguageLearningApp.Shared

@inject FolderSelectorService FolderSelectorService
@inject NavigationManager Navigation

<PageTitle>Sets</PageTitle>

<div class="row d-lg-flex m-0 p-0">
    <div class="bg-light d-none d-lg-block col-lg-3 col-xxl-2">
        <div>
            <h3 class="text-center mt-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-folder" viewBox="0 0 16 16">
                    <path d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139q.323-.119.684-.12h5.396z" />
                </svg>
                Folders
            </h3>
            <div class="sidebar overflow-auto pb-1">
                @foreach (Folder folder in FolderSelectorService.Folders)
                {
                    <div class="container justify-content-center">
                        <a class="btn btn-primary w-100 mb-1" href="/sets/@folder.Id">@folder.Name</a>
                    </div>
                }
            </div>
        </div>
        <div>
            <button class="btn btn-primary w-100 my-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-plus-square" viewBox="0 0 16 16">
                    <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z" />
                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4" />
                </svg>
                Create new folder
            </button>
        </div>
    </div>
    <div class="col-lg-9 col-xxl-10">
        <div class="mt-lg-2">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="sets">Sets</a></li>
                    <li class="breadcrumb-item active" aria-current="page">@FolderSelectorService.CurrentFolder!.Name</li>
                </ol>
            </nav>
        </div>
    </div>
</div>


@code {
    [Parameter]
    public int FolderId { get; set; }

    protected override void OnInitialized()
    {
        FolderSelectorService.OnChange.Add(StateHasChanged);
    }

    protected override void OnParametersSet()
    {
        if (FolderId == default)
            Navigation.NavigateTo("/sets/1");
        else
            FolderSelectorService.OpenFolder(FolderId);
    }
}
