@page "/{username}/profile"

@inject AuthenticationStateProvider AuthenticationStateProvider
@inject UserService UserService
@inject NavigationManager Navigation
@inject IStringLocalizer<Profile> Loc

<PageTitle>@Username</PageTitle>

@if (_user is null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="row d-lg-flex m-0 p-0">
        <div class="bg-light d-none d-lg-block col-lg-3 col-xxl-2 py-3">
            <div class="container justify-content-center">
                <Button Type="ButtonType.Button" Color="ButtonColor.Primary" Class="w-100" @onclick="@(() => Navigation.NavigateTo($"/{Username}/sets"))">@Loc["Sets"]</Button>
            </div>
        </div>

        <div class="content d-flex flex-column col-lg-9 col-xxl-10 px-0">
            Profil
        </div>
    </div>
}

@code {

    [Parameter]
    public required string Username { get; set; }

    private User? _user;

    protected async override Task OnParametersSetAsync()
    {
        _user = await UserService.GetUser(Username);
        if (_user is null)
        {
            Navigation.NavigateTo("page-not-found");
        }
    }
}
